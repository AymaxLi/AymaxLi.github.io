<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Safari çš„ä¸‹è½½å‘ | AymaxLi</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link rel="shortcut icon" href="/bujiangjiu.ico">
  <link rel="stylesheet" href="/css/app.css">
  <!-- <link rel='stylesheet' href='http://fonts.useso.com/css?family=Source+Code+Pro'> -->
  
</head>

<body>
  <nav class="app-nav">
  
    
      <a href="/.">home</a>
    
  
</nav>

  <main class="post">
  <article>
  <h1 class="article-title">
    <a href="/2017/03/20/iframe-problem-in-safari/">Safari çš„ä¸‹è½½å‘</a>
  </h1>

  <section class="article-meta">
    <p class="article-date">March 20 2017</p>
  </section>

  <section class="article-entry">
    <h2 id="Fuse"><a href="#Fuse" class="headerlink" title="Fuse"></a>Fuse</h2><p>è¿‘æ¥æ¥åˆ°ä¸€ä¸ªä¼˜åŒ–éœ€æ±‚æ˜¯è¦æ”¹ ios ç«¯ä¸‹è½½é¡µé¢çš„æµç¨‹ï¼Œå½“åˆæˆ‘ä»¥ä¸ºè¿™æ˜¯å°èœä¸€ç¢Ÿï¼Œæ™šé¥­åä¾¿å»å—äº­ä¹°äº†æ¯å¥¶ç›–ğŸ¨ï¼Œå·®å±é¢ å±é¢ çš„å›äº†å·¥ä½œå®¤ğŸš²ï¼Œåæ¥å‘ç°æ‰å‘ç°æˆ‘çœŸæ˜¯ too navie ğŸ˜·ğŸ˜·</p>
<h2 id="Details"><a href="#Details" class="headerlink" title="Details"></a>Details</h2><ul>
<li><p>ä»¥å‰çš„ä¸šåŠ¡æµç¨‹ï¼š<br>ç”¨æˆ·é˜…è¯»å®Œå¤‡æ³¨é¡µåï¼Œç‚¹å‡»æŒ‰é’®ï¼Œé€šè¿‡ window.open(â€˜itms-service://xxxxxxxâ€™) æ‰“å¼€æ–°çª—å£ï¼Œè°ƒç”¨ itms-service åè®®çš„ç©ºç™½é¡µä¸‹è½½è½¯ä»¶</p>
</li>
<li><p>æ–°çš„æµç¨‹ï¼š<br>ç”¨æˆ·æ¥åˆ°å¤‡æ³¨é¡µåï¼Œç›´æ¥å¼¹å‡ºä¸‹è½½æç¤ºï¼Œç‚¹å‡»å®‰è£…åç»§ç»­é˜…è¯»å¤‡æ³¨é¡µ</p>
</li>
</ul>
<h2 id="Trapped"><a href="#Trapped" class="headerlink" title="Trapped"></a>Trapped</h2><p>å› ä¸ºè¿™ä¸ª itms-service://xxxxxxx ç©ºç™½ä¸‹è½½é¡µæˆ‘æ˜¯æ— æ³•æ§åˆ¶çš„ï¼Œæˆ‘ä¸å¯èƒ½ä»è¿™é‡Œè·³åˆ°å¤‡æ³¨é¡µã€‚æ‰€ä»¥æˆ‘ä¸€å¼€å§‹çš„æƒ³æ³•æ˜¯åœ¨å¤‡æ³¨é¡µæƒ³åŠæ³•æŠ›å¼ƒ window.open(downloadUrl) è¿™ç§æ–°å»ºæ ‡ç­¾é¡µçš„æ–¹æ³•ï¼Œinsteadï¼Œæˆ‘æƒ³ç›´æ¥è°ƒç”¨è¿™ä¸ª itms-serviceã€‚</p>
<h3 id="location-href"><a href="#location-href" class="headerlink" title="location.href"></a>location.href</h3><p>é¦–å…ˆæˆ‘å°è¯•çš„ç¬¬ä¸€ä¸ªæ–¹æ³•æ˜¯ç›´æ¥æ”¹ location.hrefï¼Œ<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">location.href = <span class="string">'itms-service://xxxxxxx'</span>;</div></pre></td></tr></table></figure></p>
<p>è¿™ä¸ªæ–¹æ³•åœ¨ iOS10 çš„ Safari ä¸Šæ˜¯å¯è¡Œçš„ï¼Œå®ƒä¼šè°ƒç”¨ items-service æ¥ä¸‹è½½ï¼Œä½†æ˜¯é¡µé¢çš„ href å…¶å®ä¸ä¼šæ”¹å˜ï¼Œä¼šç»§ç»­åœç•™åœ¨å¤‡æ³¨é¡µã€‚</p>
<p>å¤©çœŸçš„æˆ‘ä»¥ä¸ºè¿™æ ·å°±èƒ½æ”¶å·¥äº†ï¼Œç„¶è€Œäº‹æƒ…å¹¶æ²¡æœ‰è¿™ä¹ˆé¡ºåˆ©ã€‚iOS8 å’Œ iOS9 çš„ Safari å¯¹ç›´æ¥æ”¹ location.href çš„æµè§ˆå™¨æµè§ˆå™¨è¡Œä¸ºå¹¶æ²¡æœ‰è¿™ä¹ˆå‹å¥½ã€‚</p>
<ul>
<li><p>åœ¨ iOS8 ä¸­ï¼Œç›´æ¥æ”¹ location.href å¹¶ä¸ä¼šé©¬ä¸Šæœ‰æ•ˆæœï¼Œè¦æ‰‹åŠ¨åˆ·æ–°æ‰ä¼šæœ‰ä¸‹è½½æç¤ºã€‚</p>
</li>
<li><p>åœ¨ iOS9 ä¸­ï¼Œç›´æ¥æ”¹ location.href æ›´åŠ ç¥å¥‡ï¼Œå®ƒè™½ç„¶ä¸ç”¨æ‰‹åŠ¨åˆ·æ–°ä¹Ÿæœ‰ä¸‹è½½æç¤ºï¼Œä½†æ˜¯ç‚¹å‡»ä¸‹è½½åå½“å‰å¤‡æ³¨é¡µä¼šè¢«å…³æ‰ï¼Œä»¤äººæ±—é¢œã€‚ã€‚ã€‚</p>
</li>
</ul>
<h3 id="iframe"><a href="#iframe" class="headerlink" title="iframe"></a>iframe</h3><p>åæ¥ï¼Œæˆ‘å°è¯•äº†ç¬¬äºŒä¸ªæ–¹æ³• - iframe<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> ifr = <span class="built_in">document</span>.createElement(<span class="string">'iframe'</span>);</div><div class="line">ifr.src = <span class="string">'itms-service://xxxxxxx'</span>;</div><div class="line">ifr.style.display = <span class="string">'none'</span>;</div><div class="line"><span class="built_in">document</span>.body.appendChild(ifr);</div></pre></td></tr></table></figure></p>
<p>å¾ˆä¸å·§ï¼Œä¸åŒç‰ˆæœ¬çš„ Safari å¯¹ iframe çš„å¤„ç†ä¹Ÿæ˜¯ä¸ä¸€æ ·çš„</p>
<h2 id="Solved"><a href="#Solved" class="headerlink" title="Solved"></a>Solved</h2><p>æœ€åï¼Œæˆ‘æ‰¾åˆ°èƒ½äº†å…¼å®¹ iOS8/9/10 çš„æ–¹æ³• ğŸ™ˆğŸ™‰ğŸ™Š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> link = <span class="built_in">document</span>.createElement(<span class="string">'a'</span>);</div><div class="line">link.href = <span class="string">'itms-service://xxxxxxx'</span>;</div><div class="line">link.style = <span class="string">"visibility: hidden"</span>;</div><div class="line"><span class="built_in">document</span>.body.appendChild(link);</div><div class="line">link.click();</div></pre></td></tr></table></figure></p>
<p>å¯¹äºè¿™ç§ç”¨ <code>a</code> æ ‡ç­¾æ‰“å¼€ itms-service://xxxxxxx çš„æ–¹å¼ï¼Œä¸‰ä¸ªç‰ˆæœ¬çš„ Safari çš„æµè§ˆå™¨è¡Œä¸ºç»ˆäºä¸€æ ·äº†ï¼Œéƒ½æ˜¯èƒ½å¼¹å‡ºä¸‹è½½æç¤ºï¼ŒçœŸæ˜¯çš†å¤§æ¬¢å–œå•Šï¼Œå¿ƒä¸­é»˜é»˜é—®å€™äº† Safari åƒç™¾éï¼Œç»ˆäºèƒ½å›å®¿èˆæ´—æ¾¡ç¡è§‰äº†ğŸ˜­ğŸ˜­</p>
<h2 id="references"><a href="#references" class="headerlink" title="references"></a>references</h2><ul>
<li><a href="http://www.cnblogs.com/zichi/p/5011212.html" target="_blank" rel="external">Safari ä¸‹ç”¨ â€œlocation.href = filePathâ€ å®ç°ä¸‹è½½åŠŸèƒ½çš„è¯¡å¼‚ bug</a></li>
<li><a href="http://www.webdeveloper.com/forum/showthread.php?112208-how-to-overcome-hidden-iframe-problem-in-Safari" target="_blank" rel="external">how to overcome hidden iframe problem in Safari</a></li>
<li><a href="http://stackoverflow.com/questions/23190467/how-can-i-make-my-file-download-work-on-ie-and-safari" target="_blank" rel="external">How can I make my file download work on IE and safari?</a></li>
<li><a href="https://www.keakon.net/2015/09/29/%E5%85%BC%E5%AE%B9iOS9Safari%E7%9A%84%E5%BA%94%E7%94%A8%E8%B7%B3%E8%BD%AC%E6%96%B9%E6%A1%88%E6%8E%A2%E7%B4%A2" target="_blank" rel="external">å…¼å®¹ iOS 9 Safari çš„åº”ç”¨è·³è½¬æ–¹æ¡ˆæ¢ç´¢</a></li>
</ul>

  </section>
</article>

  <div class="sharing grid">
  <section class="profile grid-item grid">
    <img class="avatar" src="/images/bujiangjiu.jpg" alt="avatar" />
    <div class="grid-item">
      <p class="title"> AymaxLi </p>
      <p class="subtitle"> è¯·ä½ åˆ«å«Œæˆ‘å°†è¿™çº¿ç¨‹å¥‰çŒ®ç»™ä½  </p>
    <div>
  </section>

  <!-- <section class="share-btns"> -->
    <!-- <p> share it if you like it~ </p> -->
    <!-- <a
  class="twitter-share-button"
  data-size="large"
  data-via="DrakeLeung"
  href="https://twitter.com/intent/tweet?text= id="Fuse"><a href=""
>
  Tweet
</a>

<script>
  window.twttr = (function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0],
    t = window.twttr || {};
  if (d.getElementById(id)) return t;
  js = d.createElement(s);
  js.id = id;
  js.src = "https://platform.twitter.com/widgets.js";
  js.async = true;
  fjs.parentNode.insertBefore(js, fjs);

  t._e = [];
  t.ready = function(f) {
    t._e.push(f);
  };

  return t;
}(document, "script", "twitter-wjs"));
</script>
 -->
  <!-- </section> -->
</div>


  
    
<section class="article-comment">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

<script>
  var disqus_shortname = 'aymax';
  
  var disqus_url = 'http://yoursite.com/2017/03/20/iframe-problem-in-safari/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


  
</main>

</body>
</html>
